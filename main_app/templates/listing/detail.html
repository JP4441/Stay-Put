{% extends 'base.html' %} {% block content %}

<div class="container">
  <div class="row text-center">
    <div class="col-md-12">
      <h1 class="display-6">{{listing.address}}</h1>
      <p class="lead">
        {{listing.city}}, {{listing.province}}, {{listing.postalCode}}
      </p>
    </div>
  </div>
</div>
<hr />

<!-- Breadcrumb -->
<section id="bc" class="mt-3">
  <div class="container">
    <nav id="breadcrumb_bookmarked">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="{% url 'home' %}">Home</a>
        </li>
        <li class="breadcrumb-item active">Listings</li>
        <li class="breadcrumb-item active">{{listing.address}}</li>
      </ol>
      {% if user.is_authenticated%}
     
      {% if listing.id in userbookmarks %}

      <a href="{% url "remove_bookmark" listing.id %}">
      <img class='bookmark' 
      src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Ic_bookmark_48px.svg/96px-Ic_bookmark_48px.svg.png?20141023110451" alt="">
      </a>

      {% else %}

      <a href="{% url "add_bookmark" listing.id %}">
      <img class='bookmark' 
      src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Ic_bookmark_outline_48px.svg/96px-Ic_bookmark_outline_48px.svg.png?20141023110503" alt="">
      </a>

      {% endif %}
      {% endif %}
    </nav>
  </div>
</section>
<!-- Listing -->



<section id="listing" class="py-4">
  <div class="container">
    <a href="{% url 'home' %}" class="btn btn-light mb-4">Back To Listings</a>
    <div class="row">
      <div class="col-md-9">
        <!-- Home Main Image -->
        <!-- <img
          src="{{photo_urls.0.url}}"
          alt=""
          class="img-main img-fluid mb-3 bigger"
        /> -->
        <!-- #################### -->
        <div
          id="carouselExampleControls"
          class="carousel slide"
          data-bs-ride="carousel"
        >
          <div class="carousel-inner">
            {% for photo_url in photo_urls %}
              {% if photo_url == photo_urls.0 %}
              <div class="carousel-item active">
                <img src="{{photo_url.url}}" class="d-block w-100" />
              </div>
              {% else %}
              <div class="carousel-item">
                <img src="{{photo_url.url}}" class="d-block w-100" />
              </div>
              {% endif %} 
            {% endfor %}
          </div>
          <button
            class="carousel-control-prev"
            type="button"
            data-bs-target="#carouselExampleControls"
            data-bs-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button
            class="carousel-control-next"
            type="button"
            data-bs-target="#carouselExampleControls"
            data-bs-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
        <!-- #################### -->
        <br />
        <!-- Thumbnails -->
        <!-- Thumbnail 1 -->
        <div class="row mb-5 thumbs">
          <div class="col-md-2">
            <a>
              <img
                src="{{photo_urls.0.url}}"
                alt=""
                class="img-fluid smaller"
              />
            </a>
          </div>
          <!-- Thumbnail 2 -->
          <div class="col-md-2">
            <a>
              <img
                src="{{photo_urls.1.url}}"
                alt=""
                class="img-fluid smaller"
              />
            </a>
          </div>
          <!-- Thumbnail 3 -->
          <div class="col-md-2">
            <a>
              <img src="{{photo_urls.2.url}}" alt="" class="img-fluid" />
            </a>
          </div>
          <!-- Thumbnail 4 -->
          <div class="col-md-2">
            <a>
              <img src="{{photo_urls.3.url}}" alt="" class="img-fluid" />
            </a>
          </div>
          <!-- Thumbnail 5 -->
          <div class="col-md-2">
            <a>
              <img src="{{photo_urls.4.url}}" alt="" class="img-fluid" />
            </a>
          </div>
          <!-- Thumbnail 6 -->
          <div class="col-md-2">
            <a>
              <img src="{{photo_urls.5.url}}" alt="" class="img-fluid" />
            </a>
          </div>
        </div>
        <!-- Fields -->
        <div class="row mb-5">
          <div class="col-md-6">
            <ul class="list-group list-group-flush">
              <li class="list-group-item text-secondary">
                Asking Price:
                <span class="float-right">{{listing.price}}</span>
              </li>
              <li class="list-group-item text-secondary">
                Bedrooms:
                <span class="float-right">{{listing.bedrooms}}</span>
              </li>
              <li class="list-group-item text-secondary">
                Bathrooms:
                <span class="float-right">{{listing.bathrooms}}</span>
              </li>
              <li class="list-group-item text-secondary">
                Parking:
                <span class="float-right">{{listing.parking}} </span>
              </li>
            </ul>
          </div>
          <div class="col-md-6">
            <ul class="list-group list-group-flush">
              <li class="list-group-item text-secondary">
                Square Feet:
                <span class="float-right">{{listing.sqft}}</span>
              </li>
              <li class="list-group-item text-secondary">
                Building Type:
                <span class="float-right">{{listing.buildingType}} </span>
              </li>
              <li class="list-group-item text-secondary">
                Listing Date:
                <span class="float-right">{{listing.listingDate}}</span>
              </li>
              <li class="list-group-item text-secondary">
                Realtor:
                <a href="{% url 'detail' agent.user_id %}" class="float-right"
                  >{{agent}}
                </a>
              </li>
            </ul>
          </div>
        </div>
        <!-- Description -->
        <div class="row mb-5">
          <div class="col-md-12">{{listing.description}}</div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card mb-3">
          <img class="card-img-top" src="{{agent.image.url}}" alt="" />
          <div class="card-body">
            <h5 class="card-title">Property Realtor</h5>
            <h6>
              Name:
              <p>{{agent}}</p>
            </h6>
            <h6>
              Phone number:
              <p>{{agent.phoneNumber}}</p>
            </h6>
            <h6>
              Email:
              <p>{{agent.email}}</p>
            </h6>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% if is_user_realtor == True %}
<a href="{% url 'listing_update' listing.id %}"
  ><button class="btn mvpButt">Update Listing</button></a
>
{% endif %}

<!-- https://maps.google.com/maps?q= { (address)(ex:2444 Bay street,Toronto,On) }=UTF8&iwloc=&output=embed -->
<div class="mapouter">
  <div class="gmap_canvas">
    <iframe
      width="600"
      height="500"
      id="gmap_canvas"
      src="https://maps.google.com/maps?q={{listing.address}},{{listing.city}},{{listing.province}}=&output=embed"
      frameborder="0"
      scrolling="no"
      marginheight="0"
      marginwidth="0"
    ></iframe
    ><br /><style>
      .mapouter {
        position: relative;
        text-align: right;
        height: 500px;
        width: 600px;
      }
    </style>
    <a href="https://www.embedgooglemap.net">google maps html</a>
    <style>
      .gmap_canvas {
        overflow: hidden;
        background: none !important;
        height: 500px;
        width: 600px;
      }
    </style>
  </div>
</div>
{% comment %} <script>
  bookmark = document.getElementById('bookmark')
  bookmark.addEventListener('click', bookmarkStatus)
  function bookmarkStatus(){
    if (bookmark.getAttribute('src') == 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Ic_bookmark_outline_48px.svg/96px-Ic_bookmark_outline_48px.svg.png?20141023110503'){
      bookmark.setAttribute('src', "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Ic_bookmark_48px.svg/96px-Ic_bookmark_48px.svg.png?20141023110451")
    } 
    else{
      bookmark.setAttribute('src', "https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Ic_bookmark_outline_48px.svg/96px-Ic_bookmark_outline_48px.svg.png?20141023110503")
    }
  }

</script> {% endcomment %}
{% endblock %}
